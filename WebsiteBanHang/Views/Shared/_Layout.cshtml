<!-- Cập nhật nút giỏ hàng trong Views/Shared/_Layout.cshtml -->
<!-- Thay thế phần Cart Button hiện tại bằng code này: -->
<!-- Cart Button -->
<a asp-controller="ShoppingCart" asp-action="Index" class="btn btn-outline-dark me-3 cart-btn position-relative" type="button">
    <i class="bi-cart-fill me-1"></i>
    Giỏ hàng
    <span class="badge bg-danger text-white ms-1 rounded-pill position-absolute top-0 start-100 translate-middle" id="cart-badge">0</span>
</a>

<!-- Thêm CSS cho cart badge -->
<style>
    .cart-btn .badge {
        font-size: 0.7rem;
        min-width: 1.2rem;
        height: 1.2rem;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .cart-btn:hover .badge {
        animation: pulse 0.5s;
    }

    @keyframes pulse {
        0%

    {
        transform: scale(1) translate(-50%, -50%);
    }

    50% {
        transform: scale(1.1) translate(-50%, -50%);
    }

    100% {
        transform: scale(1) translate(-50%, -50%);
    }

    }

    /* Toast container */
    .toast-container {
        z-index: 1055;
    }

    .toast {
        min-width: 300px;
    }
</style>

<!-- Thêm script để cập nhật cart count khi trang load -->
<script>
    $(document).ready(function() {
        // Cập nhật số lượng giỏ hàng khi trang load
        updateCartBadge();
    });

    function updateCartBadge() {
        $.get('/ShoppingCart/GetCartCount', function(data) {
            $('#cart-badge').text(data.count);
            if (data.count > 0) {
                $('#cart-badge').removeClass('d-none');
            } else {
                $('#cart-badge').addClass('d-none');
            }
        }).fail(function() {
            // Nếu không lấy được data, hiển thị 0
            $('#cart-badge').text('0').addClass('d-none');
        });
    }

    // Hàm global để cập nhật cart từ các trang khác
    window.updateCartBadge = updateCartBadge;
</script>